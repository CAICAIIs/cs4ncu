---
tags:
  - 开发
  - 决策日志
  - 贡献指南
  - 项目历史
---

# 项目开发历程与决策日志

!!! danger 重要
    本文档目前是 ai 生成的草案

欢迎你，未来的开发者！🎉

这份文档记录了 `CS for NCU` 项目在初期搭建和精炼过程中的关键技术决策、遇到的问题以及最终的解决方案。阅读它，将帮助你快速理解项目当前的架构、设计哲学以及我们共同沉淀下的最佳实践。

!!! reminder "为何要阅读本文档？"
    理解“为什么”这么做，比单纯知道“是什么”更重要。这份日志旨在为你提供决策背后的**上下文（Context）**，让你在未来的开发和维护中，能够做出更明智、更符合项目风格的选择。

---

## 1. CSS 架构的奠基：从单文件到模块化

项目初期，所有的自定义样式都存放在单一的 `extra.css` 文件中。

!!! danger "单一文件的痛点"
    随着定制化需求的增多，单一文件会迅速变得臃肿、混乱，难以维护。日夜间模式的样式、不同组件的样式、修复代码全部混杂在一起，极易引发冲突，也让新开发者望而生畏。

**我们的决策**：我们设计并实施了一套**基于职责分离的模块化 CSS 架构**。

???+ "点击查看模块化架构的设计哲学"

    我们将 `docs/css/` 目录下的文件进行了如下拆分：

    | 文件名 | 核心职责 | 设计考量 |
    | :--- | :--- | :--- |
    | `extra.css` | **主入口文件** | 保持入口干净，只做 `@import`，逻辑清晰。 |
    | `00-variables.css` | **设计变量** | 将所有颜色、字体等“设计令牌”集中管理，实现一键换肤。 |
    | `01-layout.css` | **布局样式** | 隔离结构性样式，避免与组件样式耦合。 |
    | `02-components.css` | **组件样式** | 存放通用 UI 元素，便于复用。 |
    | `03-admonitions.css` | **提示框样式** | 将高度定制化的提示框样式独立出来，便于集中管理和扩展。 |
    | `99-fixes.css` | **问题修复** | 隔离高优先级的修复代码，确保它们最后加载，避免污染主样式。 |

    💡 **小技巧**：我们选择使用**数字前缀**（`00-`, `01-`...）而非下划线 `_`，是为了在任何文件系统中都能**强制规定和直观展示**文件的加载顺序。

## 2. 追求极致：平滑圆角 (Squircle) 的探索之旅

为了提升 UI 的精致感，我们决定为提示框等元素实现苹果风格的平滑圆角。这个过程经历了几次技术迭代。

!!! example "一个关于技术选型的例子 🧭"
    这个过程完美地展示了如何在“理想效果”与“工程现实”之间做出权衡。

    1.  **尝试一：`border-radius`**
        *   **结果**：实现简单，但边角过渡生硬，无法达到“平滑”的质感。
    2.  **尝试二：`mask-image` / `mask-border`**
        *   **结果**：效果显著提升，能模拟出平滑曲线。但在处理可拉伸、非等比矩形时，配置较为复杂，且存在一些兼容性边缘情况。
    3.  **最终方案：`clip-path` + 内联 SVG `<clipPath>`**
        *   **决策**：我们在 `overrides/main.html` 中定义一个全局的、隐藏的 SVG `<clipPath>` 元素，然后在 CSS 中通过 `clip-path: url(#squircle);` 来引用它。
        *   **为什么这是最佳方案？**
            *   **效果完美**：实现了真正的、可无限缩放的平滑圆角。
            *   **兼容性好**：得到了所有现代浏览器的广泛支持。
            *   **职责分离**：将“形状定义”（HTML/SVG）与“样式应用”（CSS）彻底分开，架构更清晰。

## 3. 赋予灵魂：创建项目专属的视觉语言

为了让我们的“学习指北”更具个性和趣味性，我们决定摆脱传统的图标符号，为核心的提示框设计一套独特的视觉语言。

!!! story "我们的创意过程"
    我们进行了一场头脑风暴，旨在用更富想象力的意象来传达信息：

    *   **危险 (Danger)**: 我们选择了 **龙 🐉**，代表强大、不可预测的力量，需要最高级别的敬畏。
    *   **警告 (Alert)**: 我们选择了 **烽火台 🗼**，它不是直接的威胁，而是“远方的警示”，提醒用户提高警惕。
    *   **官方声明 (Declaration)**: 我们选择了 **号角 🎺**，它自古以来就是发布重要宣告的工具，充满权威感。
    *   **举个例子 (Example)**: 我们选择了 **指南针 🧭**，这与我们的项目名“学习**指北**”形成了绝妙的品牌关联，寓意“为你的理解指明方向”。

    这套系统不仅实用，更赋予了项目独一无二的灵魂。

## 4. 协作的基石：《写作与风格指南》的诞生

随着项目内容的增加和贡献者队伍的扩大，一份统一的规范变得至关重要。

!!! declaration "指南的核心价值"
    我们共同撰写并最终确立了**《内容创作与风格指南》**。它不仅是规则的集合，更是我们协作的“契约”。

    *   它统一了从**标点、空格**到**高级 Markdown 特性**（如 `admonition`, `tabbed`）的所有用法。
    *   它定义了**标签 (`tags`) 的使用哲学**，指导贡献者如何构建一个清晰的知识网络。
    *   它本身就是其所有规则的**一个活生生的、可供参考的范例**。

    我们强烈建议所有新贡献者在开始写作前，首先通读这份指南。

## 5. 经验教训：`tags` 插件的故障排除

在配置 `tags` 插件时，我们遇到了“标签可见但无法点击”的问题。

!!! author "一次宝贵的排错经历 ✍️"
    起初，我们尝试了 `slugify` 等配置，但问题依旧。最终，通过仔细查阅**最新的官方文档**，我们发现 `tags` 插件的工作模式发生了根本性的变化：

    1.  **旧模式 (已废弃)**: 依赖 `mkdocs.yml` 中的 `tags_file` 配置来**自动注入**内容。
    2.  **新模式 (当前)**: 需要在目标 Markdown 文件（如 `tags.md`）中**手动放置一个指令** `<!-- material/tags -->`，插件才会在此处生成内容。

    **最重要的教训**：开源工具在快速迭代，遇到问题时，**第一时间查阅最新的官方文档**，往往比依赖过去的经验或旧的教程更有效。